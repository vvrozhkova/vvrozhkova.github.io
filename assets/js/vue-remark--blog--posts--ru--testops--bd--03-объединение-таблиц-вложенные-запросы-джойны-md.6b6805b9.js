(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{UQSp:function(t,a,s){"use strict";a.a={name:"VueRemarkRoot",render(t){return t("div",null,this.$slots.default)}}},fQPD:function(t,a,s){"use strict";s.r(a);var n=s("KHd+"),o=s("UQSp"),e=s("oCYn");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a.config.optionMergeStrategies;var p={VueRemarkRoot:o.a},c=function(t){var a=t.options.components=t.options.components||{},s=t.options.computed=t.options.computed||{};Object.keys(p).forEach((function(t){"object"===i(p[t])&&"function"==typeof p[t].render||"function"==typeof p[t]&&"function"==typeof p[t].options.render?a[t]=p[t]:s[t]=function(){return p[t]}}))},v=e.a.config.optionMergeStrategies,_="__vueRemarkFrontMatter",l={excerpt:null,title:"Объединение таблиц(вложенные запросы, джойны",category:"testops",description:"Объединение таблиц(вложенные запросы, джойны",tags:["qa"],icon:"fas fa-bug",image:"null",date:"2022-07-07T00:00:00.000Z",keywords:"qa",order:2,links:[{items:[{title:"CREATE, DROP, DELETE, UPDATE, INSERT, ALTER",link:"/create-drop-delete-update-insert-alter"},{title:"Базовые запросы с использованием LIKE, BETWEEN, ORDER BY, ALIASES, IN, TOP-LIMIT, DISTINCT",link:"/bazovye-zaprosy-s-ispolzovaniem-like-between-order-by-aliases-in-top-limit-distinct"},{title:"Объединение таблиц(вложенные запросы, джойны",link:"/obedinenie-tablicz-vlozhennye-zaprosy-dzhojny"}]}]};var u=function(t){t.options[_]&&(t.options[_]=l),e.a.util.defineReactive(t.options,_,l),t.options.computed=v.computed({$frontmatter:function(){return t.options[_]}},t.options.computed)},k=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("VueRemarkRoot",[a("p",[t._v("Вложенный запрос используется для выборки данных, которые будут использоваться в условии отбора записей основного запроса. Его применяют для:")]),a("p",[t._v("сравнения выражения с результатом вложенного запроса;\nопределения того, включено ли выражение в результаты вложенного запроса;\nпроверки того, выбирает ли запрос определенные строки.\nВложенный запрос имеет следующие компоненты:")]),a("p",[t._v("ключевое слово SELECT  после которого указываются имена столбцов или выражения (чаще всего список содержит один элемент) ;\nключевое слово FROM и имя таблицы, из которой выбираются данные;\nнеобязательное предложение WHERE;\nнеобязательное предложение GROUP BY:\nнеобязательное предложение HAVING.\n Вложенные запросы  могут включаться в WHERE или HAVING так (в квадратных скобках указаны необязательные элементы, через | – один из элементов):")]),a("p",[t._v("WHERE | HAVING выражение оператор"),a("em",[t._v("сравнения (вложенный запрос);\nWHERE | HAVING выражение, включающее вложенный запрос;\nWHERE | HAVING выражение [NOT] IN (вложенный запрос);\nWHERE | HAVING выражение  оператор")]),t._v("сравнения  ANY | ALL (вложенный запрос).\nТакже вложенные запросы могут вставляться в основной запрос после ключевого слова SELECT")]),a("p",[t._v("Вложенный запрос, возвращающий одно значение, может использоваться в условии отбора записей WHERE как обычное значение совместно с операциями =, <>, >=, <=, >, <.")]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"sql"}},[a("pre",{staticClass:"language-sql"},[a("code",{staticClass:"language-sql"},[a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" title"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" author"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" price"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" amount\n"),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n"),a("span",{staticClass:"token keyword"},[t._v("WHERE")]),t._v(" price "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("\n         "),a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("MIN")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("price"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" \n         "),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n      "),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])]),a("p",[t._v("Вложенный запрос, возвращающий одно значение, может использоваться в выражениях как обычный операнд, например, к нему можно что-то прибавить, вычесть и пр.")]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"sql"}},[a("pre",{staticClass:"language-sql"},[a("code",{staticClass:"language-sql"},[a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" title"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" author"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" amount \n"),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n"),a("span",{staticClass:"token keyword"},[t._v("WHERE")]),t._v(" ABS"),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount "),a("span",{staticClass:"token operator"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("AVG")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v(">")]),a("span",{staticClass:"token number"},[t._v("3")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])]),a("p",[t._v("Вложенный запрос может возвращать несколько значений одного столбца.  Тогда его можно использовать в разделе WHERE совместно с оператором IN.")]),a("p",[a("code",{staticClass:"language-inline-text"},[t._v("WHERE имя_столбца IN (вложенный запрос, возвращающий один столбец)")])]),a("p",[t._v("Оператор IN определяет, совпадает ли значение столбца с одним из значений, содержащихся во вложенном запросе. При этом логическое выражение после WHERE получает значение истина. Оператор NOT IN выполняет обратное действие – выражение истинно, если значение столбца не содержится во вложенном запросе.")]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"sql"}},[a("pre",{staticClass:"language-sql"},[a("code",{staticClass:"language-sql"},[a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" title"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" author"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" amount"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" price\n"),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n"),a("span",{staticClass:"token keyword"},[t._v("WHERE")]),t._v(" author "),a("span",{staticClass:"token operator"},[t._v("IN")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("\n        "),a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" author \n        "),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book \n        "),a("span",{staticClass:"token keyword"},[t._v("GROUP")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("BY")]),t._v(" author \n        "),a("span",{staticClass:"token keyword"},[t._v("HAVING")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("SUM")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v(">=")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("12")]),t._v("\n      "),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"sql"}},[a("pre",{staticClass:"language-sql"},[a("code",{staticClass:"language-sql"},[a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" author"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" title"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" amount\n"),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n"),a("span",{staticClass:"token keyword"},[t._v("WHERE")]),t._v(" author "),a("span",{staticClass:"token operator"},[t._v("IN")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("\n        "),a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" amount \n        "),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book \n        "),a("span",{staticClass:"token keyword"},[t._v("GROUP")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("BY")]),t._v(" amount \n        "),a("span",{staticClass:"token keyword"},[t._v("HAVING")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("COUNT")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),t._v("\n"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])]),a("h2",{attrs:{id:"вложенный-запрос-операторы-any-и-all"}},[a("a",{attrs:{href:"#%D0%B2%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81-%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80%D1%8B-any-%D0%B8-all","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Вложенный запрос, операторы ANY и ALL")]),a("p",[t._v("Вложенный запрос, возвращающий несколько значений одного столбца, можно использовать для отбора записей с помощью операторов ANY и ALL совместно с операциями отношения (=, <>, <=, >=, <, >).")]),a("p",[t._v("Операторы ANY и ALL используются  в SQL для сравнения некоторого значения с результирующим набором вложенного запроса, состоящим из одного столбца. При этом тип данных столбца, возвращаемого вложенным запросом, должен совпадать с типом данных столбца (или выражения), с которым происходит сравнение.")]),a("p",[t._v("При использовании оператора ANY в результирующую таблицу будут включены все записи, для которых  выражение со знаком отношения верно хотя бы для одного элемента результирующего запроса. Как работает оператор ANY:")]),a("p",[t._v("amount > ANY (10, 12) эквивалентно amount > 10")]),a("p",[t._v("amount < ANY (10, 12) эквивалентно amount < 12")]),a("p",[t._v("amount = ANY (10, 12) эквивалентно (amount = 10) OR (amount = 12), а также amount IN  (10,12)")]),a("p",[t._v("amount <> ANY (10, 12) вернет все записи с любым значением amount, включая 10 и 12")]),a("p",[t._v("При использовании оператора ALL в результирующую таблицу будут включены все записи, для которых  выражение со знаком отношения верно для всех элементов результирующего запроса. Как работает оператор ALL:")]),a("p",[t._v("amount > ALL (10, 12) эквивалентно amount > 12")]),a("p",[t._v("amount < ALL (10, 12) эквивалентно amount < 10")]),a("p",[t._v("amount = ALL (10, 12) не вернет ни одной записи, так как эквивалентно (amount = 10) AND (amount = 12)\namount <> ALL (10, 12) вернет все записи кроме тех,  в которыхamount равно 10 или 12")]),a("p",[t._v("Важно! Операторы ALL и ANY можно использовать только с вложенными запросами. В примерах выше (10, 12) приводится как результат вложенного запроса просто для того, чтобы показать как эти операторы работают. В запросах так записывать нельзя.")]),a("p",[t._v("Вывести информацию о тех книгах, количество которых меньше самого маленького среднего количества книг каждого автора.")]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"sql"}},[a("pre",{staticClass:"language-sql"},[a("code",{staticClass:"language-sql"},[a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" title"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" author"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" amount"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" price\n"),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n"),a("span",{staticClass:"token keyword"},[t._v("WHERE")]),t._v(" amount "),a("span",{staticClass:"token operator"},[t._v("<")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("ALL")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("\n        "),a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("AVG")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" \n        "),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book \n        "),a("span",{staticClass:"token keyword"},[t._v("GROUP")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("BY")]),t._v(" author \n      "),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])]),a("p",[t._v("Вывести информацию о тех книгах, количество которых меньше самого большого среднего количества книг каждого автора.")]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"sql"}},[a("pre",{staticClass:"language-sql"},[a("code",{staticClass:"language-sql"},[a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" title"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" author"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" amount"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" price\n"),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n"),a("span",{staticClass:"token keyword"},[t._v("WHERE")]),t._v(" amount "),a("span",{staticClass:"token operator"},[t._v("<")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("ANY")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("\n        "),a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("AVG")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" \n        "),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book \n        "),a("span",{staticClass:"token keyword"},[t._v("GROUP")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("BY")]),t._v(" author \n      "),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])]),a("h2",{attrs:{id:"вложенный-запрос-после-select"}},[a("a",{attrs:{href:"#%D0%B2%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81-%D0%BF%D0%BE%D1%81%D0%BB%D0%B5-select","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Вложенный запрос после SELECT")]),a("p",[t._v("Вложенный запрос может располагаться после ключевого слова SELECT. В этом случае результат выполнения запроса выводится в отдельном столбце результирующей таблицы. При этом результатом запроса может быть только одно значение, тогда оно будет повторяться во всех строках. Также вложенный запрос может использоваться в выражениях.")]),a("p",[t._v("Пример")]),a("p",[t._v("Вывести информацию о книгах, количество экземпляров которых отличается от среднего количества экземпляров книг на складе более чем на 3,  а также указать среднее значение количества экземпляров книг.")]),a("p",[t._v("Запрос:")]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"sql"}},[a("pre",{staticClass:"language-sql"},[a("code",{staticClass:"language-sql"},[a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" title"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" author"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" amount"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" \n    "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("\n     "),a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("AVG")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" \n     "),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n    "),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("AS")]),t._v(" Среднее_количество \n"),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book\n"),a("span",{staticClass:"token keyword"},[t._v("WHERE")]),t._v(" abs"),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount "),a("span",{staticClass:"token operator"},[t._v("-")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("SELECT")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("AVG")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("amount"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("FROM")]),t._v(" book"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v(">")]),a("span",{staticClass:"token number"},[t._v("3")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"text"}},[a("pre",{staticClass:"language-text"},[a("code",{staticClass:"language-text"},[t._v("+-----------------------+------------------+--------+--------------------+\n| title                 | author           | amount | Среднее_количество |\n+-----------------------+------------------+--------+--------------------+\n| Мастер и Маргарита    | Булгаков М.А.    | 3      | 7.6667             |\n| Братья Карамазовы     | Достоевский Ф.М. | 3      | 7.6667             |\n| Стихотворения и поэмы | Есенин С.А.      | 15     | 7.6667             |\n+-----------------------+------------------+--------+--------------------+")])])])])}),[],!1,null,null,null);"function"==typeof c&&c(k),"function"==typeof u&&u(k);a.default=k.exports}}]);