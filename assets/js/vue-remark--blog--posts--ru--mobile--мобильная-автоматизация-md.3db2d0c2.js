(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{UQSp:function(t,a,s){"use strict";a.a={name:"VueRemarkRoot",render(t){return t("div",null,this.$slots.default)}}},ZuvK:function(t,a,s){"use strict";s.r(a);var n=s("KHd+"),i=s("UQSp"),o=s("oCYn");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.a.config.optionMergeStrategies;var l={VueRemarkRoot:i.a},c=function(t){var a=t.options.components=t.options.components||{},s=t.options.computed=t.options.computed||{};Object.keys(l).forEach((function(t){"object"===e(l[t])&&"function"==typeof l[t].render||"function"==typeof l[t]&&"function"==typeof l[t].options.render?a[t]=l[t]:s[t]=function(){return l[t]}}))},p=o.a.config.optionMergeStrategies,v="__vueRemarkFrontMatter",r={excerpt:null,title:"Мобильная автоматизация",category:"mobile",description:"Мобильная автоматизация",tags:["qa"],icon:"fas fa-code",image:"null",date:"2022-09-02T00:00:00.000Z",keywords:"qa, компоненты",order:1,links:[{title:"",items:[{title:"Алгоритмы (курс Яндекс)",link:"/algoritmy-kurs-yandeks/"}]}]};var _=function(t){t.options[v]&&(t.options[v]=r),o.a.util.defineReactive(t.options,v,r),t.options.computed=p.computed({$frontmatter:function(){return t.options[v]}},t.options.computed)},u=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("VueRemarkRoot",[a("h2",{attrs:{id:"сложности-мобильной-автоматизации"}},[a("a",{attrs:{href:"#%D1%81%D0%BB%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D0%BC%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9-%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Сложности мобильной автоматизации")]),a("p",[t._v("Основные сложности при автоматизации тестирования мобильных приложений:")]),a("ol",[a("li",[t._v("существует несколько платформ: Android, iOs;")]),a("li",[t._v("у Android есть разные лаунчеры, обертки, которые также хотелось бы покрыть;")]),a("li",[t._v("сложный деплой, сложнее чем на вебе, тк прежде чем запустить тесты нужно собрать билды (их нужно где то собирать и как то передавать в тесты).\nТакже сложные хот фиксы, их не так просто сделать  как в вебе, например, нужно проходить процесс ревью перед заливом в маркет;")]),a("li",[t._v("сложность в масштабировании (параллелизации и многопоточном запуске), т. к. используется много ресурсов для запуска мобильных тестов( и для эмуляторов, и для реальных устройств)\nзапустить всё во много потоков не так просто и дорого;")]),a("li",[t._v("дорогостоящая инфраструктура - есть простой вариант, использование cloud ферм для запуска тестов, но цена у них очень высокая. А для запуска на реальном железе - для iOs нужны Mac устройства, \nс хорошими ресурсами и это тоже дорого.")]),a("li",[t._v("нестабильные тесты - т.к. в моб приложении ограниченная зона видимости, мы видим только те элементы, которые отображаются на экране. Могут быть разнообразные popup, push сообщения, нотификации, которые перекрывают элементы.")])]),a("p",[t._v("Однако, в автоматизации моб приложений мы используем тот же паттерн Page Objects, Selenium под капотом и тот же подход к написанию тестов (Arrange(подготавливаем данные) - Act(выполняем действие) - Assert(проверяем)).")]),a("h2",{attrs:{id:"инструменты-для-мобильной-автоматизации"}},[a("a",{attrs:{href:"#%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B-%D0%B4%D0%BB%D1%8F-%D0%BC%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9-%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Инструменты для мобильной автоматизации")]),a("table",[a("thead",[a("tr",[a("th"),a("th",[t._v("Appium")]),a("th",[t._v("Espresso")]),a("th",[t._v("XCUITest")]),a("th",[t._v("Detox")]),a("th",[t._v("Selendroid")])])]),a("tbody",[a("tr",[a("td",[a("strong",[t._v("iOS")])]),a("td",[t._v("+")]),a("td",[t._v("-")]),a("td",[t._v("+")]),a("td",[t._v("+")]),a("td",[t._v("+")])]),a("tr",[a("td",[a("strong",[t._v("Android")])]),a("td",[t._v("+")]),a("td",[t._v("+")]),a("td",[t._v("-")]),a("td",[t._v("+")]),a("td",[t._v("+")])]),a("tr",[a("td",[a("strong",[t._v("Type")])]),a("td",[t._v("Balck box")]),a("td",[t._v("White box")]),a("td",[t._v("Black box")]),a("td",[t._v("Grey box")]),a("td",[t._v("Black box")])]),a("tr",[a("td",[a("strong",[t._v("Programming Lang")])]),a("td",[t._v("Almost any")]),a("td",[t._v("Kotlin")]),a("td",[t._v("Swift")]),a("td",[t._v("JavaScript")]),a("td",[t._v("Java")])]),a("tr",[a("td",[a("strong",[t._v("Cost")])]),a("td",[t._v("Free")]),a("td",[t._v("Free")]),a("td",[t._v("Free")]),a("td",[t._v("Free")]),a("td",[t._v("Free")])]),a("tr",[a("td",[a("strong",[t._v("Community")])]),a("td",[t._v("Very active")]),a("td",[t._v("Google")]),a("td",[t._v("Apple")]),a("td",[t._v("Wix")]),a("td",[t._v("Average")])]),a("tr",[a("td",[a("strong",[t._v("Speed")])]),a("td",[t._v("Slow")]),a("td",[t._v("Fast")]),a("td",[t._v("Fast")]),a("td",[t._v("Fast")]),a("td",[t._v("Slow")])]),a("tr",[a("td",[a("strong",[t._v("Web, native, hybrid")])]),a("td",[t._v("+")]),a("td",[t._v("Hybrid and native")]),a("td",[t._v("Only native")]),a("td",[t._v("Only")]),a("td",[t._v("+")])])])]),a("p",[t._v("Selendroid - достаточно старый инструмент, используется скорее теми компаниями которые взяли его еще давно, неизвестно поддерживается ли он на текущий день.")]),a("p",[t._v("Detox - подходит только для приложений на react native, нативные моб приложения им не получится автоматизировать.")]),a("p",[t._v("Espresso, XCUITest - нативные инструменты, заточные под свою платформу.")]),a("h2",{attrs:{id:"преимущества-appium"}},[a("a",{attrs:{href:"#%D0%BF%D1%80%D0%B5%D0%B8%D0%BC%D1%83%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%B0-appium","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Преимущества Appium")]),a("ol",[a("li",[t._v("Возможность писать кросс платформенные тесты. \nНаписав один раз тест под одну платформу, нужно минимальное количество действий чтобы адаптировать его под другую (добавить соответсвующие локаторы и обработать индивидуальные особенности платформы);")]),a("li",[t._v("Позволяет писать тесты на практически любом языке программирования;")]),a("li",[t._v("Нет необходимости модифицировать код приложения. Appium - полный Black box и нам ненужно модифицировать код самого приложения;")]),a("li",[t._v("Работает на основе Selenium JSON wire protocol;")]),a("li",[t._v("Open source фреймворк с активным комьюнити. Спонсируется souce lab которая также предоставляет cloud решения;")]),a("li",[t._v("Поддержка параллельного запуска используя Selenium Grid;")])]),a("h2",{attrs:{id:"архитектура-appium"}},[a("a",{attrs:{href:"#%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0-appium","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Архитектура Appium")]),a("p",[t._v("Appium - это http сервер.")]),a("p",[t._v("У нас есть тестовый скрипт, мы передаем его в Appium и Appium транслирует его на мобильные устройства, с помощью json wire protocol. ")]),a("p",[t._v("Appium - это обертка над теми же нативными инструментами(XCUITest и UIAutomator, Expresso), т.к. он все свои команды дальше ретранслирует в команды понятные нативным инструментам.")]),a("p",[t._v("Для iOS используется XCUITest, для Android можно выбрать между UIAutomator и Expresso. ")]),a("p",[t._v("Для Expresso добавили поддержку примерно в 2020 г, он на 20% быстрее, чем UIAutomator. Плюс Expresso делает Appium немного Grey box'ом, потому что есть возможность сделать backdoor к приложению и в целом делает немного более открытым код приложения.")]),a("p",[t._v("JSONWP(JSON wire protocol) - механизм, созданный командой разработчиков WebDriver. Этот протокол представляет собой набор четко определенных стандартизированных endpoints, открытых через RESTfull API.")]),a("p",[a("code",{staticClass:"language-inline-text"},[t._v("AppiumDriver.getPageSource();")]),t._v(" - этот метод вызовет HTTP-запрос, и получит ответ от API. Назад вернется page source в формате строки.")]),a("p",[a("code",{staticClass:"language-inline-text"},[t._v("/session/:sessionId/source")]),t._v(" - эндпоинт, который обрабатывает метод getPageSource.")]),a("h2",{attrs:{id:"appium--android"}},[a("a",{attrs:{href:"#appium--android","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Appium + Android")]),a("p",[t._v("Appium работает с Android через Espresso и UIAutomator. Поддерживается Google.\nEspresso быстрее чем UIAutomator. ")]),a("h2",{attrs:{id:"appium--ios"}},[a("a",{attrs:{href:"#appium--ios","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Appium + iOS")]),a("p",[t._v("Несколько лет назад под капотом использовался не XCUITests, а другой фреймворк. Но Apple решила прекратить его поддержку и выпустила XCUITests. А XCUITests на тот момент противоречил философии Appium, в том что нам не нужно модифицировать код, т.к. XCUITests нужно было собирать вместе с приложением. ")]),a("p",[t._v("И некоторое время, Appium нельзя было использовать для iOS приложений. На помощь пришел Facebook и сделал WebDriverAgent Server. При запуске тестов на Appium'e на моб устройство также ставится WebDriverAgent и он транслирует команды от Appium к XCUITests.")]),a("h2",{attrs:{id:"способы-запуска"}},[a("a",{attrs:{href:"#%D1%81%D0%BF%D0%BE%D1%81%D0%BE%D0%B1%D1%8B-%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA%D0%B0","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Способы запуска")]),a("ul",[a("li",[t._v("на реальных устройствах;")])]),a("p",[t._v("Это самый надежный вариант. Но построить свою ферму дорого и сложно поддерживать, тк устройства всегда были подключены к сети и нужно выполнять настройки, чтобы не всплывали всяки popup сообщения и если они всегда в сети, то нужно будет часто менять батарейку и собрать парк из разных девайсов будет дорого  и сложно.")]),a("ul",[a("li",[t._v("на симуляторах/эмуляторах;")])]),a("p",[t._v("Оптимальный вариант. Не так много кейсов, которые репродьюсятся только на реальных устройствах. Они есть но их не много.")]),a("p",[t._v("для iOS - используются симуляторы, на Android поднимаются эмуляторы. ")]),a("p",[t._v("Используются стандартные эмуляторы, которые предоставляет Android Studio и симуляторы от XCode для iOS.")]),a("ul",[a("li",[t._v("на cloud фермах "),a("ul",[a("li",[t._v("Browser Stack (2 параллельных запуска ~ 400"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mtext",[t._v("вмесяц")]),a("mo",{attrs:{separator:"true"}},[t._v(",")]),a("mn",[t._v("5")]),a("mtext",[t._v("параллельныхзапусков ")]),a("mn",[t._v("1000")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("в месяц, 5 параллельных запусков ~ 1000")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.8388800000000001em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("в")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("м")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("е")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("с")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("я")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("ц")]),a("span",{staticClass:"mpunct"},[t._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[t._v("5")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("п")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("а")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("р")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("а")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("л")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("л")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("е")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("л")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("ь")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("н")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("ы")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("х")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("з")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("а")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("п")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("у")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("с")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("к")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("о")]),a("span",{staticClass:"mord cyrillic_fallback"},[t._v("в")]),a("span",{staticClass:"mspace nobreak"}),a("span",{staticClass:"mord"},[t._v("1")]),a("span",{staticClass:"mord"},[t._v("0")]),a("span",{staticClass:"mord"},[t._v("0")]),a("span",{staticClass:"mord"},[t._v("0")])])])]),t._v(" в месяц)")]),a("li",[t._v("Sauce Labs")]),a("li",[t._v("AWS Device Farm")])])])]),a("p",[t._v("Самые удобные, тк просто указываем url на хост в ферме и запускаем. Но это очень дорого, плюс вопрос к секьюрности для запусков тестов. ")]),a("h2",{attrs:{id:"запуск-тестов"}},[a("a",{attrs:{href:"#%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D1%82%D0%B5%D1%81%D1%82%D0%BE%D0%B2","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Запуск тестов")]),a("ul",[a("li",[t._v("для iOS")])]),a("p",[t._v("При запуске на реальном устройстве:\n1. собираем .ipa файл, подписанный сертификатом организации\n2. берем девайс, добавленный в провижен организации\n3. используется аккаунт с сертификатом разработчика")]),a("p",[t._v("При запуске на симуляторе просто собираем через XCode .app файл.\nНа симуляторе нельзя установить файл с расширением .ipa, потому что там другая архитектура и он там не запустится.")]),a("ul",[a("li",[t._v("для Android")])]),a("p",[t._v("Собираем apk через Gradle и Android Studio на эмулятор и на реальное устройство и можно работать.")]),a("h2",{attrs:{id:"что-нужно-чтобы-начать"}},[a("a",{attrs:{href:"#%D1%87%D1%82%D0%BE-%D0%BD%D1%83%D0%B6%D0%BD%D0%BE-%D1%87%D1%82%D0%BE%D0%B1%D1%8B-%D0%BD%D0%B0%D1%87%D0%B0%D1%82%D1%8C","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Что нужно чтобы начать?")]),a("h3",{attrs:{id:"android"}},[a("a",{attrs:{href:"#android","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Android")]),a("ul",[a("li",[t._v("JDK (Java Development Kit)")]),a("li",[t._v("Android SDK")]),a("li",[t._v("Appium")])]),a("h3",{attrs:{id:"ios"}},[a("a",{attrs:{href:"#ios","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("iOS")]),a("ul",[a("li",[t._v("Mac OS")]),a("li",[t._v("XCode")]),a("li",[t._v("JDK (Java Development Kit)")]),a("li",[t._v("Homebrew")]),a("li",[t._v("Node and npm")])]),a("p",[a("a",{attrs:{href:"https://qa-automation.git-doc.evo.dev/mobile/ubuntu.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("https://qa-automation.git-doc.evo.dev/mobile/ubuntu.html")])]),a("h2",{attrs:{id:"стек-инструментов"}},[a("a",{attrs:{href:"#%D1%81%D1%82%D0%B5%D0%BA-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%BE%D0%B2","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Стек инструментов")]),a("ul",[a("li",[t._v("Appium")]),a("li",[t._v("Java/Kotlin")]),a("li",[t._v("TestNg")]),a("li",[t._v("Maven")]),a("li",[t._v("Allure REport")]),a("li",[t._v("AssertJ")]),a("li",[t._v("Log4J")])]),a("h2",{attrs:{id:"инструменты-чтобы-находить-локаторы"}},[a("a",{attrs:{href:"#%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B-%D1%87%D1%82%D0%BE%D0%B1%D1%8B-%D0%BD%D0%B0%D1%85%D0%BE%D0%B4%D0%B8%D1%82%D1%8C-%D0%BB%D0%BE%D0%BA%D0%B0%D1%82%D0%BE%D1%80%D1%8B","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Инструменты чтобы находить локаторы")]),a("h3",{attrs:{id:"android-1"}},[a("a",{attrs:{href:"#android-1","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Android")]),a("ul",[a("li",[t._v("UIAutomatorViewer (Android)")]),a("li",[t._v("Appium Inspector - делает скриншот текущего экрана и показывает состояние выбранного элемента.")])]),a("p",[t._v("Можно искать элементы по id и по xPath:")]),a("ul",[a("li",[t._v("Id")])]),a("p",[t._v("resource-id = id")]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token annotation punctuation"},[t._v("@AndroidFindBy")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("id "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"tvProSalePay"')]),a("span",{staticClass:"token punctuation"},[t._v(")")])])])]),a("ul",[a("li",[t._v("xPath")])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token annotation punctuation"},[t._v("@AndroidFindBy")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("xpath "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("\"//android.widget.TextView[@text = 'XL']\"")]),a("span",{staticClass:"token punctuation"},[t._v(")")])])])]),a("h3",{attrs:{id:"ios-1"}},[a("a",{attrs:{href:"#ios-1","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("iOS")]),a("p",[t._v("Можно использовать только Appium Inspector, так как нет других инструментов для этой цели.")]),a("p",[t._v("Можно искать по id, iOSClassChain, iOS predicate string (в порядке снижения скорости). ")]),a("p",[t._v("По xPath тоже можно но крайне не рекомендуется так как это происходит очень медленно из за того что в iOS приложениях нет xml дерева и appium его вычисляет самостоятельно а на это тратится время.")]),a("ul",[a("li",[t._v("Id")])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token annotation punctuation"},[t._v("@iOSXCUITFindBy")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("id"),a("span",{staticClass:"token operator"},[t._v("=")]),a("span",{staticClass:"token string"},[t._v('"client name"')]),a("span",{staticClass:"token punctuation"},[t._v(")")])])])]),a("ul",[a("li",[t._v("iOSClassChain\nАналог xPath.")])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token annotation punctuation"},[t._v("@iOSXCUITFindBy")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("iOSClassChain"),a("span",{staticClass:"token operator"},[t._v("=")]),a("span",{staticClass:"token string"},[t._v("\"**/XCUIElementTypeButton[`name == 'icRatingStar'`]\"")]),a("span",{staticClass:"token punctuation"},[t._v(")")])])])]),a("ul",[a("li",[t._v("iOS predicate string")])]),a("p",[t._v("Свой тип локаторов.")]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token class-name"},[t._v("String")]),t._v(" selector "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("\"type == 'XCUIElementTypeButton' AND value BEGINSWITH[c] 'bla' AND visible == 1\"")])])])]),a("h2",{attrs:{id:"боли-appium"}},[a("a",{attrs:{href:"#%D0%B1%D0%BE%D0%BB%D0%B8-appium","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Боли Appium")]),a("h3",{attrs:{id:"недоступные-элементы"}},[a("a",{attrs:{href:"#%D0%BD%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D1%8B%D0%B5-%D1%8D%D0%BB%D0%B5%D0%BC%D0%B5%D0%BD%D1%82%D1%8B","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Недоступные элементы")]),a("p",[t._v("Некоторые объекты не имеют выделенного элемента в DOM дереве и сложно с ними взаимодействовать отдельно, например взять текст. Встречается в сообщениях об ошибке, тост сообщениями, поп-апами.")]),a("p",[a("strong",[t._v("Решение:")])]),a("ol",[a("li",[t._v("Можно использовать библиотеку tesseract - для распознавания текста на изображении.")]),a("li",[t._v("Клики по координатам."),a("br"),t._v("\nЕсли нужно кликнуть на элемент, которого нет в дом дереве."),a("br"),t._v("\nВ этом случае лучше брать не координаты этого элемента, а стараться брать соотношение по экрану (находить центр и т.д.), потому что если мы поменяем устройство, на котором будем прогонять и там расширение экрана другое, то мы столкнемся с трудностями.")])]),a("h3",{attrs:{id:"ограниченная-зона-видимости"}},[a("a",{attrs:{href:"#%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F-%D0%B7%D0%BE%D0%BD%D0%B0-%D0%B2%D0%B8%D0%B4%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Ограниченная зона видимости")]),a("p",[t._v("Когда мы делаем скриншот в Appium, мы видим дерево только тех элементов, которые есть сейчас на экране, то что вне мы не видим. ")]),a("p",[a("strong",[t._v("Решение:")])]),a("p",[t._v("Дойти до элементов вне зоны видимости мы можем только проскролив.")]),a("ul",[a("li",[t._v("iOS")])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token class-name"},[t._v("HashMap")]),a("span",{staticClass:"token generics"},[a("span",{staticClass:"token punctuation"},[t._v("<")]),a("span",{staticClass:"token class-name"},[t._v("String")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token class-name"},[t._v("String")]),a("span",{staticClass:"token punctuation"},[t._v(">")])]),t._v(" scrollObject "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("new")]),t._v(" "),a("span",{staticClass:"token class-name"},[t._v("HashMap")]),a("span",{staticClass:"token generics"},[a("span",{staticClass:"token punctuation"},[t._v("<")]),a("span",{staticClass:"token punctuation"},[t._v(">")])]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\nscrollObject"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("put")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v('"element"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" element"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("getId")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\nscrollObject"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("put")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v('"toVisible"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"true"')]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\ndriver"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("executeScript")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v('"mobile:scroll"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" scrollObject"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])]),a("ul",[a("li",[t._v("Android")])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token keyword"},[t._v("protected")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("void")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("scrollToElementAndroid")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token class-name"},[t._v("String")]),t._v(" scrollableListId"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token class-name"},[t._v("String")]),t._v(" selectionText"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token class-name"},[t._v("AndroidDriver")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" driver"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("findElementByAndroidUIAutomator")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v('"new UiScrollable(new UiSelector().scrollable(true)"')]),t._v("\n    "),a("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('".resourceId(\\""')]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("+")]),t._v(" scrollableListId "),a("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"\\"))"')]),t._v("\n    "),a("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('".setAsHorizontalList().scrollIntoView(new UiSelector().text(\\""')]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("+")]),t._v(" selectionText "),a("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"\\"))"')]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("click")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),a("span",{staticClass:"token punctuation"},[t._v("}")])])])]),a("p",[a("strong",[t._v("Универсальный скролл")])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token keyword"},[t._v("public")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("void")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("swipeUpToFindElement")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token class-name"},[t._v("By")]),t._v(" by"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("int")]),t._v(" maxSwipes"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("int")]),t._v(" alreadySwiped "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("0")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("while")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("driver"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("findElements")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("by"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("size")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("==")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("0")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        "),a("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("alreadySwiped "),a("span",{staticClass:"token operator"},[t._v(">")]),t._v(" maxSwipes"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n            "),a("span",{staticClass:"token function"},[t._v("waitForElementToBePresent")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("by"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"Невозможно найти элемент по свайпу"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token class-name"},[t._v("Constants")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token constant"},[t._v("SMALL_TIMEOUT")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n            "),a("span",{staticClass:"token keyword"},[t._v("return")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n        "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n        "),a("span",{staticClass:"token function"},[t._v("swipeUpQuick")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n        "),a("span",{staticClass:"token class-name"},[t._v("Log")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("info")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token string"},[t._v('"Выполнен свайп"')]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n        "),a("span",{staticClass:"token operator"},[t._v("++")]),t._v("alreadySwiped"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),a("span",{staticClass:"token punctuation"},[t._v("}")])])])]),a("h3",{attrs:{id:"платформозависимость"}},[a("a",{attrs:{href:"#%D0%BF%D0%BB%D0%B0%D1%82%D1%84%D0%BE%D1%80%D0%BC%D0%BE%D0%B7%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D1%8C","aria-hidden":"true"}},[a("span",{staticClass:"icon icon-link"})]),t._v("Платформозависимость")]),a("p",[t._v("У Android и iOS есть свои особенности.")]),a("ul",[a("li",[a("p",[t._v("Разные атрибуты у элементов\niOS - value, android - text\niOs - visible, android - displayed\niOS - enabled, android - checked, checkable, enabled")])]),a("li",[a("p",[t._v("Различия в основных флоу приложения на Android и на iOS")])]),a("li",[a("p",[t._v("Часто при работе с веб вью на разных версиях Android у элементов разный xPath")])])]),a("div",{staticClass:"gridsome-highlight",attrs:{"data-language":"java"}},[a("pre",{staticClass:"language-java"},[a("code",{staticClass:"language-java"},[a("span",{staticClass:"token annotation punctuation"},[t._v("@AndroidFindAll")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("\n\n"),a("span",{staticClass:"token punctuation"},[t._v(")")])])])]),a("p",[t._v("watch?v=zp0qC6JT0rE")])])}),[],!1,null,null,null);"function"==typeof c&&c(u),"function"==typeof _&&_(u);a.default=u.exports}}]);