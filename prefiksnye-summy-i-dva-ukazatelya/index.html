<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Префиксные суммы и два указателя - TestAutomation.Space</title><meta name="gridsome:hash" content="74078440e78cf7eff9cd218b18924da13af0a419"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Блог про автоматизацию тестирования и не только."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.f0237bd3777989e9e70ab13662a377d0.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.f0237bd3777989e9e70ab13662a377d0.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.f0237bd3777989e9e70ab13662a377d0.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.f0237bd3777989e9e70ab13662a377d0.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.f0237bd3777989e9e70ab13662a377d0.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.f0237bd3777989e9e70ab13662a377d0.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.f0237bd3777989e9e70ab13662a377d0.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.f0237bd3777989e9e70ab13662a377d0.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"><link rel="preload" href="/assets/css/0.styles.e9c63011.css" as="style"><link rel="preload" href="/assets/js/app.efa271c5.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.e639b5b6.js" as="script"><link rel="preload" href="/assets/js/143.983cb1fa.js" as="script"><link rel="preload" href="/assets/js/141.369cc459.js" as="script"><link rel="preload" href="/assets/js/144.2eeac416.js" as="script"><link rel="preload" href="/assets/js/146.a7088a60.js" as="script"><link rel="preload" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--5-префиксные-суммы-и-два-указателя-md.49a8c537.js" as="script"><link rel="preload" href="/assets/js/151.1537b00e.js" as="script"><link rel="prefetch" href="/assets/js/1.1f9fec69.js"><link rel="prefetch" href="/assets/js/142.b58d2bbf.js"><link rel="prefetch" href="/assets/js/145.544934bb.js"><link rel="prefetch" href="/assets/js/147.3e3ce2b1.js"><link rel="prefetch" href="/assets/js/148.46f741c4.js"><link rel="prefetch" href="/assets/js/149.f890b68f.js"><link rel="prefetch" href="/assets/js/150.ff2c4a17.js"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.06f0cdf6.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.6c69cf34.js"><link rel="prefetch" href="/assets/js/page--src--templates--category-vue.fddd63f0.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.5c617581.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--2-gis--1-собеседование-в-2-гис-md.6ae6781b.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--2-gis--2-ci-cd-md.dc45c448.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--2-gis--3-подходы-к-автоматизации-тестирования-md.cdfc1eb4.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--2-gis--4-фреймворки-автоматизации-тестирования-md.0b236ed1.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--api--01-понимание-клиент-серверной-архитектуры-md.3176e5a2.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--api--02-взаимодействие-сервера-клиента-и-бд-md.e1c63afe.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--api--03-rest-и-soap-md.c1dbfab8.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--api--05-response-codes-md.81509cc8.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--api--07-аутентификация-и-авторизация-md.ca35fb0b.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--api--ресурсы-api-md.aaca5268.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--api--чек-лист-проверок-api-md.12726066.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--assertions-md.8b324214.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--code-style-md.ce101461.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--1-ide--профессионально-работаем-с-intelli-j-idea-md.fd0203e8.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--2-язык-программирования--как-установить-open-jdk-на-mac-os-md.db1e144f.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--3-система-сборки--maven-md.62d6a26b.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--3-система-сборки--как-создать-новый-gradle-проект-md.6917a666.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--3-система-сборки--как-установить-gradle-на-mac-os-md.3f8554f4.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--3-система-сборки--система-сборки-ant-maven-gradle-md.7dcc950b.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--4-тестовый-фреймворк--j-unit-vs-test-ng-md.ef2b4da8.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--5-web-driver-и-его-обертки--selenium-api-md.1d50d7f7.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--5-web-driver-и-его-обертки--selenium-selenide-md.b2227d2b.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--5-web-driver-и-его-обертки--ресурсы-selenium-4-md.c053317a.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--5-web-driver-и-его-обертки--что-такое-selenium-md.abd1944c.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--инфраструктура--инфраструктура-проекта-автотестирования-md.200ceffd.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--курс-по-автоматизации-тестирования-java-md.eb8a90f2.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--проблемы-и-решения-md.6aaa5d46.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--ресурсы-ui-md.366ee5d9.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--ресурсы-для-написания-проекта-по-автоматизации-md.39e2fac8.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--automation--теория--1-понятие-автоматизированного-тестирования-md.977f93ed.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--01-подготовка-к-собеседованию-на-qa-automation-engineer-md.e1220e1e.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--02-подготовка-к-собеседованию-на-qa-automation-engineer-md.87a7bf88.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--03-теоретическая-база-по-тестированию-md.6e2f7c77.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--04-теоретическая-база-по-автоматизации-md.f19b253a.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--05-теоретическая-база-по-программированию-md.819ee808.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--06-теоретическая-база-по-test-ops-md.5acb75ea.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--07-тестирование-web-md.d8580443.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--08-тестирование-api-md.adb470ee.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--09-тестирование-mobile-md.45ee57ca.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--10-sql-md.9004743b.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--11-требования-на-вакансии-qa-automation-engineer-md.25d1badd.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--12-сайты-для-практики-md.83852877.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--interview--13-пример-резюме-md.ddc07dfe.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--1-сложность-тестирование-особые-случаи-md.b443cc81.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--2-линейный-поиск-md.d761de46.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--3-множества-md.f6808db2.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--4-словари-и-сортировка-подсчётом-md.e12e360a.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--6-бинарный-поиск-md.a939c6a9.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--7-сортировка-событий-md.c3c8ccc1.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--8-деревья-md.758ee344.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--алгоритмы-курс-яндекс-md.fe7b8813.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex-2--1-сортировки-быстрая-слиянием-и-поразрядная-md.59805763.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--autotests-project--java-core-md.e9489d96.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--autotests-project--ui-tests--base-project-md.e2767a12.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--autotests-project--ui-tests--general-md.8a271e32.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--autotests-project--ui-tests--gradle-md.100c30ee.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--autotests-project--ui-tests--j-unit-md.5c6747f8.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--filosofia-java--1-введение-в-объекты-md.9b05ac08.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--filosofia-java--10-внутренние-классы-md.5a09af58.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--filosofia-java--15-обобщенные-типы-md.5bad4e84.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--filosofia-java--5-инициализация-и-завершение-md.ffa389db.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--алгоритмы-курс-тинькофф-md.a0312d3d.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--java--грокаем-алгоритмы-md.3801ea28.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--01-тестирование-quality-control-quality-assurance-md.9713e68d.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--02-понятие-качества-международные-стандарты-качества-md.7e1d3730.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--03-жизненный-цикл-дефекта-md.d4c42d64.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--04-жизненный-цикл-разработки-по-sdlc-software-development-life-cycle-md.6961d4b2.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--05-модели-разработки-по-md.76cae3d3.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--07-жизненный-цикл-тестирования-приложений-stlc-software-testing-life-cycle-md.bd2d8ff4.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--08-принципы-тестирования-agile-принципы-тестирования-md.63cef556.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--09-практики-и-подходы-тестирования-md.fa31424d.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-1-виды-тестирования-по-запуску-кода-на-исполнение-md.83dd5c05.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-10-виды-тестирования-по-степени-формализации-md.bb05ecb6.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-11-виды-тестирования-по-целям-и-задачам-md.a22f8179.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-12-виды-тестирования-по-техникам-и-подходам-md.967f1ed6.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-13-виды-тестирования-по-моменту-выполнения-хронологии-md.2b32959d.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-14-другие-виды-тестирования-md.73e2dac4.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-2-виды-тестирования-по-доступу-к-коду-и-архитектуре-приложения-md.566217db.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-3-виды-тестирования-по-степени-автоматизации-md.b732ab13.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-4-виды-тестирования-по-уровню-деталиции-приложения-по-уровню-тестирования-md.2d51029a.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-5-виды-тестирования-по-степени-важности-тестируемых-функций-по-уровню-функционального-тестирования-md.cdb9afd6.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-6-виды-тестирования-по-принципам-работы-с-приложением-md.3dff7e1c.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-7-виды-тестирования-по-природе-приложения-md.c57187c8.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-8-виды-тестирования-по-фокусировке-на-уровне-архитектуры-приложения-md.4f02e4e3.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-9-виды-тестирования-по-привлечению-конечных-пользователей-md.93b8987a.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--10-виды-тестирования-md.dd94c4cb.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--11-уровни-тестирования-md.dab42056.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--12-техники-тест-дизайна-md.3f38e7eb.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-1-тестовая-политика-и-стратегия-md.e86d99c7.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-10-test-data-tables-md.1171b534.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-11-test-scenario-md.cc4aeeb0.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-12-external-test-reports-md.d8a04a74.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-13-критерии-приемки-md.beb6d579.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-14-метрики-тестирования-md.cfef373c.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-15-требования-md.f5008d4d.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-16-тестовый-оракул-md.68e65053.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-2-международные-стандарты-тестовой-документации-md.1bc4a87e.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-3-master-test-plan-и-тестовые-планы-для-каждого-уровня-md.6221b222.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-4-понятие-test-case-и-test-suite-md.7c5ee7d7.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-5-понятие-test-basis-test-condition-и-test-procedure-md.186e983c.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-6-check-list-как-представитель-experience-based-md.d2bb1d3d.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-7-bug-report-md.715cf4bc.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-8-summary-report-md.1af35c5e.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-9-requirements-tracebility-matrix-md.405365c2.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--13-тестовая-документация-md.b8ea3321.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--manual--ресурсы-тест-дизайн-md.2393e69c.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--mobile--selenide-md.ab4691f1.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--mobile--изоляция-компонентов-md.d0e95fea.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--mobile--инструменты-тестирования-мобильных-приложений-md.993ddd05.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--mobile--мобильная-автоматизация-md.3db2d0c2.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--mobile--особенности-тестирования-мобильных-приложений-md.55ff45f7.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--mobile--подходы-badoo-md.f2ed1c36.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--mobile--тестирование-мобильного-приложения-md.b893ea33.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--nets--ethernet-wi-fi-ip-mac-маска-подсети-vlan-md.720b41a5.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--nets--модель-osi-vs-стек-протоколов-tcp-ip-md.f698ec2c.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--python--vk-edu--01-коллекции-данных-продолжение-md.d86877b6.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--1-микросервисная-архитектура-md.f617ca67.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--2-docker-md.49a8d655.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--3-kubernetes-md.a1ca9ee4.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--4-linux-md.eb6607b1.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--5-общие-вопросы-test-ops-md.f851121b.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--bd--01-create-drop-delete-update-insert-alter-md.c4d40a40.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--bd--02-базовые-запросы-с-использованием-like-between-order-by-aliases-in-top-limit-distinct-md.b2042e8e.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--bd--03-объединение-таблиц-вложенные-запросы-джойны-md.d94f8966.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--ресурсы-ci-md.9d8cb060.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--testops--ресурсы-docker-selenoid-kubernetes-md.f8ffcb02.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--web--01-понимание-dom-модели-md.718e41e8.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--web--02-какие-веб-элементы-бывают-md.5a50a1d5.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--web--03-ui-ux-и-pixel-perfect-md.b5e6dce2.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--web--04-тестирование-верстки-js-ошибок-md.6f49042c.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--web--05-работа-с-dev-tool-md.13f7c314.js"><link rel="prefetch" href="/assets/js/vue-remark--blog--posts--ru--web--10-конфигурационное-тестирование-md.f41c5e58.js"><link rel="stylesheet" href="/assets/css/0.styles.e9c63011.css"><style data-vue-tag="ssr" type="text/css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6 'Play','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Play','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Play','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.9rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Play','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.46978rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Play','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.29271rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Play','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Play','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87953rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Play','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.82485rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}ul{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;font-size:0.85rem;line-height:1.6rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;font-size:1rem;line-height:1.6rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}blockquote{margin-left:1.6rem;margin-right:1.6rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.6rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.6rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.6rem;margin-bottom:calc(1.6rem / 2);margin-top:calc(1.6rem / 2);}li > ul{margin-left:1.6rem;margin-bottom:calc(1.6rem / 2);margin-top:calc(1.6rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.6rem / 2);}code{font-size:0.85rem;line-height:1.6rem;}kbd{font-size:0.85rem;line-height:1.6rem;}samp{font-size:0.85rem;line-height:1.6rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.06667rem;padding-right:1.06667rem;padding-top:0.8rem;padding-bottom:calc(0.8rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><script data-vue-tag="ssr" src="//cookieinfoscript.com/js/cookieinfo.min.js" id="cookieinfo" data-message="Мы используем куки, чтобы улучшить ваш пользовательский опыт. Продолжая посещать этот сайт, вы соглашаетесь на использование нами файлов" data-linkmsg="cookie."></script><script data-vue-tag="ssr" src="https://yastatic.net/es5-shims/0.0.2/es5-shims.min.js"></script><script data-vue-tag="ssr" src="https://yastatic.net/share2/share.js" async></script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div id="app" data-server-rendered="true" class="has-sidebar docs-page" data-v-12914d58 data-v-5c7d72f6><header data-v-199ccded data-v-12914d58><div class="header-inner container flex gap-30" data-v-199ccded><div class="logo" data-v-54faaab3 data-v-199ccded><a href="/" title="Back to home" class="logo__link active" data-v-54faaab3><img alt="TestAutomation.Space" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1453 236' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-c7c4c725ffec56d3d80fd6150dc23645'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-c7c4c725ffec56d3d80fd6150dc23645)' width='1453' height='236' xlink:href='data:image/svg%2bxml%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAKCAYAAAAEqljUAAAACXBIWXMAAAsTAAALEwEAmpwYAAADbklEQVRIx52W7YtVVRjFz71lKmZNWmCZkCNlljZiJmahZqigKTOjpuZbZlaajr3R1Iil2ZumolSoEEQEEUV/QZ/62J80DHf9OivWGQ6He9Npw2Zv9n5e17P2c04xMTFRVEPSHKAfeAi402dAW5LXf2e1r5/dzpyq/O3OxDjpo5q9ZLrpF%2bPj47M6nc5i4FVJ7wKXgTeAgUq5ObqdNYOp1m56kWv1DKrHsE63BKu7plw9pqbM5Oh0OvskfQfslLQLOA48D1wBVkRxhlmROTtn9wKzEtBdnr2Crt8DM2%2bVJDC9oeM5vYe85eZm7/imdZOTNCMydwB3e/XhY8AzwLCkl5LUXGAHMCppBNgH/A6ckvQV4LONpaMvSmC%2bBt4G/gC2AVuAH2Njl6R5AfR7SReAo94DhyUdDbAvABuAdcBPwIOSbpaJfSnpatj4PnA1cb0u6UlgcxL6JMU6CHxa6lt3KbBd0g8GBPiwjOlbST47H51lVt4i6bKkoQaqfUloN7Aa%2bNgBSvrcDJC0P4mtBR43GEYYOJlEnZCf04ok/QowGPB89lGZ%2bF/AGgcGfBBfZuIjwB5gk1kJvOOkgecMCvA3cCzy90hy8gbkzYCwJkU5UjL0G2C945e0KEA6Pu/vK1KlA5K2hSZtN75Q7ngcDgAngJWlkZ%2bBQ8DTTrakkdFcEMNzJNnhBUlvAbb7qCQzaLsTknQYmB/bZtW1MrE/Y2ssAGwKwwzui8BrrnwS%2bAw4A/xm%2bynWkfIZnk3y19LD9qbSF8OgY5F1g/81/pYUcTJkJ5IW1hiwStKOCC6I09UJoE/SZkkvh0qu9nsB5Uaqeyl3B1IJy24NK3anCqPAL6G995cknYvPnUnewZ82QyTtTa/y6kTHEutI7F8vC3dW0nxJT9ViuRiAhlKw82FAX5Fqm9YnJA3mHQ6HcqblcJysTWMynU%2bVFXgidDftZkpy8v2SFkfeYLmnnJFkSvsr8zCw3MBIWhdmzQvlXfX%2b6K50dQL8ngA3mHiWh%2b4PhFUbEu9o7paGyQtr9p712w%2bQi2LrtKQlRY0WI6nMzTSysVSrmOrwMyr%2b53BBpiBrX/f/l41b2qsEUsWNbobptAONb3v1zW5n38q%2b3bivr62afN3OpI2S8q2abFO3aNzVbdW/%2be26zRo41T%2bD13b6W6ve5/4BUb5WvU6RpYkAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="1453" data-src="/assets/static/logo.8fc5ad1.33f46dbd00033c1e85c9ae941e597b3d.svg" data-srcset="/assets/static/logo.82a2fbd.33f46dbd00033c1e85c9ae941e597b3d.svg 480w, /assets/static/logo.cbab2cf.33f46dbd00033c1e85c9ae941e597b3d.svg 1024w, /assets/static/logo.8fc5ad1.33f46dbd00033c1e85c9ae941e597b3d.svg 1453w" data-sizes="(max-width: 1453px) 100vw, 1453px" class="logo__svg g-image g-image--lazy g-image--loading" data-v-54faaab3><noscript data-v-54faaab3><img src="/assets/static/logo.8fc5ad1.33f46dbd00033c1e85c9ae941e597b3d.svg" class="logo__svg g-image g-image--loaded" width="1453" alt="TestAutomation.Space"></noscript></a></div><div class="header-search" data-v-199ccded><form class="header-search"><label><input type="search" title="Search" placeholder="Search..." value="" class="header-search__input"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></label></form><!----></div></div></header><a id="button" data-v-6e01d4ae data-v-5c7d72f6><i class="fas fa-chevron-up" data-v-6e01d4ae></i></a><div class="progress fixed-top" style="height:3px;" data-v-9cad354e data-v-5c7d72f6><div id="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" class="progress-bar" data-v-9cad354e></div></div><div class="container flex flex-align-top section--dark" data-v-12914d58 data-v-5c7d72f6><div class="sidebar" data-v-12914d58 data-v-5c7d72f6><h3 data-v-12914d58 data-v-5c7d72f6>Смотрите также:</h3><div data-v-12914d58 data-v-5c7d72f6><!----><a href="/algoritmy-kurs-yandeks/" class="menu-item menu-link" data-v-5c7d72f6>Алгоритмы (курс Яндекс)</a><a href="/slozhnost-testirovanie-osobye-sluchai/" class="menu-item menu-link" data-v-5c7d72f6>Сложность, тестирование, особые случаи</a><a href="/linejnyj-poisk/" class="menu-item menu-link" data-v-5c7d72f6>Линейный поиск</a><a href="/mnozhestva/" class="menu-item menu-link" data-v-5c7d72f6>Множества</a><a href="/slovari-i-sortirovka-podschyotom/" class="menu-item menu-link" data-v-5c7d72f6>Словари и сортировка подсчётом</a><a href="/prefiksnye-summy-i-dva-ukazatelya/" aria-current="page" class="menu-item menu-link active--exact active" data-v-5c7d72f6>Префиксные суммы и два указателя</a><a href="/binarnyj-poisk/" class="menu-item menu-link" data-v-5c7d72f6>Бинарный поиск</a><a href="/sortirovka-sobytij/" class="menu-item menu-link" data-v-5c7d72f6>Сортировка событий</a><a href="/derevya/" class="menu-item menu-link" data-v-5c7d72f6>Деревья</a></div></div><section class="section doc-content flex-fit" data-v-5c7d72f6><div class="section--inner container container-base"><div class="post-header" data-v-5c7d72f6><div class="date" data-v-5c7d72f6>01/02/2024</div><div class="type-row" data-v-5c7d72f6><div class="typewriter" data-v-5c7d72f6><span class="cursor" data-v-5c7d72f6></span><h1 data-v-5c7d72f6>Префиксные суммы и два указателя</h1></div></div><p data-v-5c7d72f6>Префиксные суммы и два указателя</p><div class="tags" data-v-5c7d72f6><a href="/tag/algorithms/" class="tag" data-v-5c7d72f6>algorithms</a><a href="/tag/java/" class="tag" data-v-5c7d72f6>java</a><a href="/tag/%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC%D1%8B/" class="tag" data-v-5c7d72f6>алгоритмы</a></div><div class="post-share-btns" data-v-5c7d72f6><div data-counter="ig" data-services="vkontakte,facebook,telegram" class="ya-share2" data-v-5c7d72f6></div></div></div><div class="post mb"><h2 id="префиксные-суммы"><a href="#%D0%BF%D1%80%D0%B5%D1%84%D0%B8%D0%BA%D1%81%D0%BD%D1%8B%D0%B5-%D1%81%D1%83%D0%BC%D0%BC%D1%8B" aria-hidden="true"><span class="icon icon-link"></span></a>Префиксные суммы</h2><p>Один из вариантов, когда нужно использовать алгоритм префиксные суммы, это определение чему равна сумма элементов на полуинтервале [L, R) или отрезке. </p><blockquote><p>Пусть у нас есть массив <code class="language-inline-text">nums</code> из <code class="language-inline-text">N</code> чисел и необходимо ответить на запрос &quot;Чему равна сумма элементов на полуинтервале [L, R)?&quot;</p></blockquote><p>Чтобы решить эту задачу нужно совершить предподсчет, некоторые предварительные действия с помощью которых мы потом сможем быстро отвечать на запрос.</p><p>Эти действия имеют смысл только если запросов много. Если не много то лучше просто пробежаться и посчитать.</p><blockquote><p>Подсчитаем массив <code class="language-inline-text">prefixsum</code> длиной <code class="language-inline-text">N+1</code>, где <code class="language-inline-text">prefixsum[k]</code> будет хранить сумму всех чисел из <code class="language-inline-text">nums</code> с индексами от <code class="language-inline-text">0</code> до <code class="language-inline-text">k-1</code>.</p></blockquote><p>Создадим массив префиксных сумм. Длина у него будет больше чем у исходного массива.
И к-тый элемент этого массива будет равняться сумме всех чисел исходного массива с индексами от <code class="language-inline-text">0</code> до <code class="language-inline-text">k-1</code>.
Такой массив легко посчитать за O(N^2). Но можно и еще быстрее.</p><h3 id="построение-массива-префиксных-сумм"><a href="#%D0%BF%D0%BE%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BC%D0%B0%D1%81%D1%81%D0%B8%D0%B2%D0%B0-%D0%BF%D1%80%D0%B5%D1%84%D0%B8%D0%BA%D1%81%D0%BD%D1%8B%D1%85-%D1%81%D1%83%D0%BC%D0%BC" aria-hidden="true"><span class="icon icon-link"></span></a>Построение массива префиксных сумм</h3><p>Для построения массива префиксных сумм не обязательно каждый раз складывать все значения по индексам. Достаточно взять предыдущую префиксную сумму и прибавить к ней очередное значение.</p><p>O(N): prefixsum[i] = prefixsum[i-1] + nums[i-1]</p><table><thead><tr><th>Индекс</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead><tbody><tr><td>nums</td><td>5</td><td>3</td><td>8</td><td>1</td><td>4</td><td>6</td><td></td></tr><tr><td>prefixsum</td><td>0</td><td>5</td><td>8</td><td>16</td><td>17</td><td>21</td><td>27</td></tr></tbody></table><p>При составлении префиксного массива нужно помнить 2 вещи:</p><ol><li>Массив префиксных сумм должен быть на 1 больше, чем исходный!</li><li>Переполнение. Целые числа могут переполнить допустимое значение. При сложении 2х int значений, при переполнении получается не верный результат. Если складывать long + int то значение будет приведено к типу long</li></ol><h3 id="ответ-на-запрос-суммы-на-полуинтервале"><a href="#%D0%BE%D1%82%D0%B2%D0%B5%D1%82-%D0%BD%D0%B0-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81-%D1%81%D1%83%D0%BC%D0%BC%D1%8B-%D0%BD%D0%B0-%D0%BF%D0%BE%D0%BB%D1%83%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B2%D0%B0%D0%BB%D0%B5" aria-hidden="true"><span class="icon icon-link"></span></a>Ответ на запрос суммы на полуинтервале</h3><blockquote><p>Ответ за O(1): sum(L, R) = prefixsum[R] - prefixsum[L]</p><p>Найдем sum(2, 5) = prefixsum[5] - prefixsum[2] = 21 - 8 = 13</p></blockquote><p>Почему мы ищем полуинтервал?
Чтобы избежать проблемы запросов прижатых к левому краю.
Если мы будем искать значение от 0 до 3, как для полуинтервала, то все будет корректно. А если считать как для отрезка то чтобы взять значение прижатое к левому краю нам пришлось бы выйти за пределы массива и взять элементс индексом -1.</p><h3 id="реализация-rsqrange-summ-query-через-префиксные-суммы"><a href="#%D1%80%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-rsqrange-summ-query-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-%D0%BF%D1%80%D0%B5%D1%84%D0%B8%D0%BA%D1%81%D0%BD%D1%8B%D0%B5-%D1%81%D1%83%D0%BC%D0%BC%D1%8B" aria-hidden="true"><span class="icon icon-link"></span></a>Реализация RSQ(Range Summ Query) через префиксные суммы</h3><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">makePrefixSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prefixsum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">long</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          prefixsum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> prefixsum<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> prefixsum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">rsq</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prefixsum<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> prefixsum<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">-</span> prefixsum<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div><p>Пример задачи:</p><p>Пусть на сайт заходят люди и для каждого человека записано, когда он зашел. Нужно посчитать сколько людей у нас было на сайте с L дня по R.Получится массив где в каждом элементе будет храниться число человек посетивших сайт в этот день. И далее с помощью алгоритма префиксных сумм можно ответить на целевой вопрос.</p><h3 id="задача-1"><a href="#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-1" aria-hidden="true"><span class="icon icon-link"></span></a>Задача 1</h3><blockquote><p>Дана последовательность чисел длиной N и M запросов</p></blockquote><p>Запросы: Сколько нулей на полуинтервале [l, R)</p><h4 id="решение-за-onm"><a href="#%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0-onm" aria-hidden="true"><span class="icon icon-link"></span></a>Решение за O(NM)</h4><blockquote><p>Для каждого запроса переберем все числа от L до R (не включительно) и считаем количество нулей. В худшем случае каждый запрос за <code class="language-inline-text">O(N)</code>. Так как всего запросов M то общая сложность решения <code class="language-inline-text">O(NM)</code>.</p></blockquote><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">countZeroes</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> r<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            cnt<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cnt<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h4 id="решение-за-onm-1"><a href="#%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0-onm-1" aria-hidden="true"><span class="icon icon-link"></span></a>Решение за O(N+M)</h4><p>Попробуем применить метод префиксных сумм. Вместо префиксных сумм будем считать количество нулей на префиксе.</p><blockquote><p>Для каждого префикса посчитаем количество нулей на нем (prefixZeroes). Тогда ответ на запрос на полуинтервале [L, R): prefixZeroes[R] - prefixZeroes[L].</p></blockquote><table><thead><tr><th></th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th></tr></thead><tbody><tr><td>nums</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td></td></tr><tr><td>prefixZeroes</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>2</td><td>3</td><td>3</td></tr></tbody></table><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">makePrefixZeroes</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prefixsum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">long</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            prefixsum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> prefixsum<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            prefixsum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> prefixsum<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> prefixsum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">countZeroes</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prefixZeroes<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> prefixZeroes<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">-</span> prefixZeroes<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p>Получается сложность O(N+M). O(N) уйден на построение тк у нас N элементов. И на каждый из M запросов мы отвечаем за O(1).</p><h3 id="задача-2"><a href="#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-2" aria-hidden="true"><span class="icon icon-link"></span></a>Задача 2</h3><blockquote><p>Дана последовательность чисел длиной N.
Необходимо найти количество отрезков с нулевой суммой.</p></blockquote><h4 id="решение-за-on3"><a href="#%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0-on3" aria-hidden="true"><span class="icon icon-link"></span></a>Решение за <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^3)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></h4><blockquote><p>Переберем начало и конец отрезка и просто просуммируем все его элементы.</p></blockquote><p>Перебираем левую и правую границу отрезка и перебираем цифры которые находятся между ними.</p><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">countZeroSumRanges</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> cntRanges <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> rangeSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> i<span class="token punctuation">;</span> k <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                rangeSum <span class="token operator">+=</span> nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>rangeSum <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cntRanges <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cntRanges<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h4 id="решение-за-on2"><a href="#%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0-on2" aria-hidden="true"><span class="icon icon-link"></span></a>Решение за <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></h4><blockquote><p>Переберем начало и будем двигать конец, сумируя элементы.</p></blockquote><p>Фиксируем значение слева и затем двигая от этой точки указатель правого края высчитываем сумму.
Нам не нужно каждый раз заново высчитывать всю сумму.</p><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">countZeroSumRanges</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> cntRanges <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> rangeSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rangeSum <span class="token operator">+=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>rangeSum <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cntRanges <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cntRanges<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h4 id="решение-за-on"><a href="#%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0-on" aria-hidden="true"><span class="icon icon-link"></span></a>Решение за <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></h4><p>Насчитаем префиксные суммы. Одинаковые префиксные суммы означают, что сумма на отрезке с началом и концом в позициях, на которых достигаются одинаковые префиксные суммы, будет равна нулю.</p><ol><li>Проходим по массиву и считаем префиксые суммы, при подсчете в словаре увеличиваем количество точек в этой сумме на 1.</li><li>Проходим по словарю и для каждой суммы высчитываем количество пар сочетаний по комбинаторной формуле, где k = 2 так как ищем пару</li></ol><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>C</mi><mi>n</mi><mi>k</mi></msubsup><mo>=</mo><mfrac><mrow><mi>n</mi><mo stretchy="false">!</mo></mrow><mrow><mi>k</mi><mo stretchy="false">!</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mi>k</mi><mo stretchy="false">)</mo><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>n</mi><mo>×</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo><mo stretchy="false">!</mo></mrow><mrow><mn>2</mn><mo stretchy="false">!</mo><mo>×</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo><mo stretchy="false">!</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>n</mi><mo>×</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">{C_{n}^{k}} = \frac{n!}{k!(n-k)!} = \frac{n \times (n -1) \times (n - 2)!} {2! \times (n - 2)!} = \frac{n \times (n - 1)} {2}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.096108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-2.4530000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.400108em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mclose mtight">!</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mclose mtight">)</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mclose mtight">!</span><span class="mbin mtight">×</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">)</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">×</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mbin mtight">×</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">)</span><span class="mclose mtight">!</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">×</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">countPrefixSums</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> prefixSumByValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{</span>
        prefixSumByValue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> nowSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> now <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nowSum <span class="token operator">+=</span> now<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>prefixSumByValue<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>nowSum<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            prefixSumByValue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nowSum<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        prefixSumByValue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nowSum<span class="token punctuation">,</span> prefixSumByValue<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nowSum<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> prefixSumByValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">countZeroSumRanges</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> prefixSumByValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> cntRanges <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> nowSum <span class="token operator">:</span> prefixSumByValue<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cntSum <span class="token operator">=</span> prefixSumByValue<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nowSum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cntRanges <span class="token operator">+=</span> cntSum <span class="token operator">*</span> <span class="token punctuation">(</span>cntSum <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> cntRanges<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h2 id="два-указателя"><a href="#%D0%B4%D0%B2%D0%B0-%D1%83%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D0%B5%D0%BB%D1%8F" aria-hidden="true"><span class="icon icon-link"></span></a>Два указателя</h2><h3 id="задача-1-1"><a href="#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-1-1" aria-hidden="true"><span class="icon icon-link"></span></a>Задача 1</h3><blockquote><p>Дана отсортированная последовательность чисел длиной N и число K. 
Необходимо найти количество пар чисел A, B, таких что B - A &gt; K.</p></blockquote><h4 id="решение-за-on2-1"><a href="#%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0-on2-1" aria-hidden="true"><span class="icon icon-link"></span></a>Решение за <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></h4><p>Переберем все пары чисел и для каждой проверим условие.</p><p>Во вложенном цикле можно идти не каждый раз сначала перебирая цифры, а дигаясь вправо от левой границы.</p><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">cntPairsWithDiffGtk</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sortedNums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> cntPairs <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sortedNums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> sortedNums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sortedNums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> sortedNums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cntPairs <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cntPairs<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h4 id="решение-за-on-1"><a href="#%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0-on-1" aria-hidden="true"><span class="icon icon-link"></span></a>Решение за <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></h4><p>Возьмем наименьшее число и найдем для него первое подходящее большее. Все еще большие числа точно подходят. Возьмем в качестве меньшего числа следующее, а указатель первого подходящего большего будем двигать начиная с той позиции, где он находится сейчас</p><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">cntPairsWithDiffGtk</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sortedNums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> cntPairs <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> last <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> first <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> first <span class="token operator">&lt;</span> sortedNums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> first<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span>last <span class="token operator">&lt;</span> sortedNums<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> sortedNums<span class="token punctuation">[</span>last<span class="token punctuation">]</span> <span class="token operator">-</span> sortedNums<span class="token punctuation">[</span>first<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            last <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cntPairs <span class="token operator">+=</span> sortedNums<span class="token punctuation">.</span>length <span class="token operator">-</span> last<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cntPairs<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h3 id="задача-2-1"><a href="#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-2-1" aria-hidden="true"><span class="icon icon-link"></span></a>Задача 2</h3><blockquote><p>Игрок в футбол обладает одной числовой характеристикой - профессионализмом. Команда называется сплоченной, если профессионализм любого игрока не превосходит сумарный профессионализм любых других двух игроков из команды. Команда может состоять из любого количества игроков. Дана отсортированная последовательность чисел длиной N - профессионализм игроков.</p></blockquote><p>Необходимо найти максимальный суммарный профессионализм сплоченной команды.</p><div data-language="java" class="gridsome-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">bestTeamSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> players<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> bestSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> nowSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> last <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> first <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> first <span class="token operator">&lt;</span> players<span class="token punctuation">.</span>length<span class="token punctuation">;</span> first<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span>last <span class="token operator">&lt;</span> players<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>last <span class="token operator">==</span> first <span class="token operator">||</span> players<span class="token punctuation">[</span>last<span class="token punctuation">]</span> <span class="token operator">+</span> players<span class="token punctuation">[</span>first<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> players<span class="token punctuation">[</span>last<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            nowSum <span class="token operator">+=</span> players<span class="token punctuation">[</span>last<span class="token punctuation">]</span><span class="token punctuation">;</span>
            last <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        bestSum <span class="token operator">=</span> bestSum <span class="token operator">&gt;=</span> nowSum <span class="token operator">?</span> bestSum <span class="token operator">:</span> nowSum<span class="token punctuation">;</span>
        nowSum <span class="token operator">-=</span> players<span class="token punctuation">[</span>first<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> bestSum<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h3 id="задача-3"><a href="#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-3" aria-hidden="true"><span class="icon icon-link"></span></a>Задача 3</h3><p>Даны две отсортированные последовательности чисел (длиной N и M соответсвенно) </p><p>Необходимо слить их в одну отсортированную последовательность.</p><p>Решение</p><p>Две последовательности могуть быть не обязательно одинаковые по длине, могут быть одинаковые числа.</p><p>Идея решения: делаем указатель на текущий элемент первой и во второй последовательности и просто выводим то что меньше по текущему указателю. Например, из чисел из 1 и 3 меньше 1 - 1 записали в ответ и указатель двинули в той последовательности из которой мы взяли очередное число и так далее. Если одна из последовательностей заканчивается мы просто выписываем весь оставшийся хвост текущей последовательности.</p><h4 id="неидеальная-реализация"><a href="#%D0%BD%D0%B5%D0%B8%D0%B4%D0%B5%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F-%D1%80%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F" aria-hidden="true"><span class="icon icon-link"></span></a>Неидеальная реализация</h4><p>Поставим два указателя на начало каждой из последовательностей. Выберем тот, который указывает на меньшее число, запишем это число в результат и сдвинем указатель</p></div><nav class="docs-nav" data-v-5c7d72f6><div class="docs-nav__previous" data-v-5c7d72f6><a href="/slovari-i-sortirovka-podschyotom/" class="button button--small docs-nav__link" data-v-5c7d72f6>← Словари и сортировка подсчётом</a></div><div class="docs-nav__next" data-v-5c7d72f6><a href="/binarnyj-poisk/" class="button button--small docs-nav__link" data-v-5c7d72f6>Бинарный поиск →</a></div></nav></div></section><div class="sidebar sidebar--right hide-for-small" data-v-12914d58 data-v-5c7d72f6><h3 data-v-12914d58 data-v-5c7d72f6>On this page</h3><ul class="menu-item submenu" data-v-12914d58 data-v-5c7d72f6><li class="submenu__item submenu__item-depth-2" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#префиксные-суммы" class="submenu__link" data-v-5c7d72f6>Префиксные суммы</a></li><li class="submenu__item submenu__item-depth-3" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#построение-массива-префиксных-сумм" class="submenu__link" data-v-5c7d72f6>Построение массива префиксных сумм</a></li><li class="submenu__item submenu__item-depth-3" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#ответ-на-запрос-суммы-на-полуинтервале" class="submenu__link" data-v-5c7d72f6>Ответ на запрос суммы на полуинтервале</a></li><li class="submenu__item submenu__item-depth-3" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#реализация-rsqrange-summ-query-через-префиксные-суммы" class="submenu__link" data-v-5c7d72f6>Реализация RSQ(Range Summ Query) через префиксные суммы</a></li><li class="submenu__item submenu__item-depth-3" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#задача-1" class="submenu__link" data-v-5c7d72f6>Задача 1</a></li><li class="submenu__item submenu__item-depth-3" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#задача-2" class="submenu__link" data-v-5c7d72f6>Задача 2</a></li><li class="submenu__item submenu__item-depth-2" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#два-указателя" class="submenu__link" data-v-5c7d72f6>Два указателя</a></li><li class="submenu__item submenu__item-depth-3" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#задача-1-1" class="submenu__link" data-v-5c7d72f6>Задача 1</a></li><li class="submenu__item submenu__item-depth-3" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#задача-2-1" class="submenu__link" data-v-5c7d72f6>Задача 2</a></li><li class="submenu__item submenu__item-depth-3" data-v-12914d58 data-v-5c7d72f6><a href="/prefiksnye-summy-i-dva-ukazatelya#задача-3" class="submenu__link" data-v-5c7d72f6>Задача 3</a></li></ul></div></div><footer class="text-center" data-v-12914d58><div id="counter"></div><div class="copyright">
    © Виктория Рожкова, 2022
    <br>Коммерческое использование материалов сайта TestAutomation.Space запрещено. В
    остальных случаях обязательно наличие индексируемой ссылки со словом &quot;Источник&quot; на сайт или на страницу,
    содержащую этот материал.
  </div><div class="social"><i class="far fa-envelope"></i> Почта для связи:
    <br><span class="white">vvrozhkova@gmail.com</span><br><i class="fab fa-vk"></i>:
    <a target="_blank" href="https://vk.com/testautomation.space">https://vk.com/testautomation.space</a></div></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Префиксные суммы и два указателя","content":"\n## Префиксные суммы\n\nОдин из вариантов, когда нужно использовать алгоритм префиксные суммы, это определение чему равна сумма элементов на полуинтервале [L, R) или отрезке. \n\n\u003E Пусть у нас есть массив `nums` из `N` чисел и необходимо ответить на запрос \"Чему равна сумма элементов на полуинтервале [L, R)?\"\n\nЧтобы решить эту задачу нужно совершить предподсчет, некоторые предварительные действия с помощью которых мы потом сможем быстро отвечать на запрос.\n\nЭти действия имеют смысл только если запросов много. Если не много то лучше просто пробежаться и посчитать.\n\n\u003E Подсчитаем массив `prefixsum` длиной `N+1`, где `prefixsum[k]` будет хранить сумму всех чисел из `nums` с индексами от `0` до `k-1`.\n\nСоздадим массив префиксных сумм. Длина у него будет больше чем у исходного массива.\nИ к-тый элемент этого массива будет равняться сумме всех чисел исходного массива с индексами от `0` до `k-1`.\nТакой массив легко посчитать за O(N^2). Но можно и еще быстрее.\n\n### Построение массива префиксных сумм\n\nДля построения массива префиксных сумм не обязательно каждый раз складывать все значения по индексам. Достаточно взять предыдущую префиксную сумму и прибавить к ней очередное значение.\n\nO(N): prefixsum[i] = prefixsum[i-1] + nums[i-1]\n\n|Индекс|0|1|2|3|4|5|6|\n|---|---|---|---|---|---|---|---|\n|nums|5|3|8|1|4|6|\n|prefixsum|0|5|8|16|17|21|27|\n\nПри составлении префиксного массива нужно помнить 2 вещи:\n\n1. Массив префиксных сумм должен быть на 1 больше, чем исходный!\n2. Переполнение. Целые числа могут переполнить допустимое значение. При сложении 2х int значений, при переполнении получается не верный результат. Если складывать long + int то значение будет приведено к типу long\n\n### Ответ на запрос суммы на полуинтервале\n\n\u003E Ответ за O(1): sum(L, R) = prefixsum[R] - prefixsum[L]\n\n\u003E Найдем sum(2, 5) = prefixsum[5] - prefixsum[2] = 21 - 8 = 13\n\nПочему мы ищем полуинтервал?\nЧтобы избежать проблемы запросов прижатых к левому краю.\nЕсли мы будем искать значение от 0 до 3, как для полуинтервала, то все будет корректно. А если считать как для отрезка то чтобы взять значение прижатое к левому краю нам пришлось бы выйти за пределы массива и взять элементс индексом -1.\n\n### Реализация RSQ(Range Summ Query) через префиксные суммы\n\n```java\npublic static long[] makePrefixSum(int[] nums) {\n      long[] prefixsum = new long[nums.length + 1];\n      for (int i = 1; i \u003C nums.length + 1; i++) {\n          prefixsum[i] = prefixsum[i - 1] + nums[i - 1];\n      }\n      return prefixsum;\n  }\n\n  public static long rsq(long[] prefixsum, int l, int r) {\n      return prefixsum[r] - prefixsum[l];\n  }\n  ```\n\nПример задачи:\n\nПусть на сайт заходят люди и для каждого человека записано, когда он зашел. Нужно посчитать сколько людей у нас было на сайте с L дня по R.Получится массив где в каждом элементе будет храниться число человек посетивших сайт в этот день. И далее с помощью алгоритма префиксных сумм можно ответить на целевой вопрос.\n\n\n### Задача 1\n\n\u003E Дана последовательность чисел длиной N и M запросов\n\nЗапросы: Сколько нулей на полуинтервале [l, R)\n\n#### Решение за O(NM)\n\n\u003E Для каждого запроса переберем все числа от L до R (не включительно) и считаем количество нулей. В худшем случае каждый запрос за `O(N)`. Так как всего запросов M то общая сложность решения `O(NM)`.\n\n\n```java\npublic static int countZeroes(int[] nums, int l, int r) {\n    int cnt = 0;\n    for (int i = l; i \u003C r; i++) {\n        if(nums[i] == 0){\n            cnt+=1;\n        }\n    }\n    return cnt;\n}\n```\n\n#### Решение за O(N+M)\nПопробуем применить метод префиксных сумм. Вместо префиксных сумм будем считать количество нулей на префиксе.\n\n\u003E Для каждого префикса посчитаем количество нулей на нем (prefixZeroes). Тогда ответ на запрос на полуинтервале [L, R): prefixZeroes[R] - prefixZeroes[L].\n\n||0|1|2|3|4|5|6|7|\n|---|---|---|---|---|---|---|---|---|\n|nums|1|0|1|1|0|0|1|\n|prefixZeroes|0|0|1|1|1|2|3|3|\n\n```java\npublic static long[] makePrefixZeroes(int[] nums) {\n    long[] prefixsum = new long[nums.length + 1];\n    for (int i = 1; i \u003C nums.length + 1; i++) {\n        if(nums[i-1] == 0){\n            prefixsum[i] = prefixsum[i - 1] + 1;\n        }else{\n            prefixsum[i] = prefixsum[i - 1];\n        }\n    }\n    return prefixsum;\n}\n\npublic static long countZeroes(long[] prefixZeroes, int l, int r) {\n    return prefixZeroes[r] - prefixZeroes[l];\n}\n```\n\nПолучается сложность O(N+M). O(N) уйден на построение тк у нас N элементов. И на каждый из M запросов мы отвечаем за O(1).\n\n\n### Задача 2\n\n\u003EДана последовательность чисел длиной N.\nНеобходимо найти количество отрезков с нулевой суммой.\n\n#### Решение за $O(N^3)$\n\n\u003E Переберем начало и конец отрезка и просто просуммируем все его элементы.\n\nПеребираем левую и правую границу отрезка и перебираем цифры которые находятся между ними.\n\n\n```java\npublic static int countZeroSumRanges(int[] nums) {\n    int cntRanges = 0;\n    for (int i = 0; i \u003C nums.length; i++) {\n        for (int j = i + 1; j \u003C nums.length + 1; j++) {\n            int rangeSum = 0;\n            for (int k = i; k \u003C j; k++) {\n                rangeSum += nums[k];\n            }\n            if (rangeSum == 0) {\n                cntRanges += 1;\n            }\n        }\n    }\n    return cntRanges;\n}\n```\n\n#### Решение за $O(N^2)$\n\n\u003E Переберем начало и будем двигать конец, сумируя элементы.\n\nФиксируем значение слева и затем двигая от этой точки указатель правого края высчитываем сумму.\nНам не нужно каждый раз заново высчитывать всю сумму.\n\n\n```java\npublic static int countZeroSumRanges(int[] nums) {\n    int cntRanges = 0;\n    for (int i = 0; i \u003C nums.length; i++) {\n        int rangeSum = 0;\n        for (int j = i; j \u003C nums.length; j++) {\n            rangeSum += nums[j];\n            if (rangeSum == 0) {\n                cntRanges += 1;\n            }\n        }\n    }\n    return cntRanges;\n}\n```\n\n#### Решение за $O(N)$\n\nНасчитаем префиксные суммы. Одинаковые префиксные суммы означают, что сумма на отрезке с началом и концом в позициях, на которых достигаются одинаковые префиксные суммы, будет равна нулю.\n\n1. Проходим по массиву и считаем префиксые суммы, при подсчете в словаре увеличиваем количество точек в этой сумме на 1.\n2. Проходим по словарю и для каждой суммы высчитываем количество пар сочетаний по комбинаторной формуле, где k = 2 так как ищем пару\n\n${C_{n}^{k}} = \\frac{n!}{k!(n-k)!} = \\frac{n \\times (n -1) \\times (n - 2)!} {2! \\times (n - 2)!} = \\frac{n \\times (n - 1)} {2}$\n\n```java\npublic static Map\u003CInteger, Integer\u003E countPrefixSums(int[] nums) {\n    Map\u003CInteger, Integer\u003E prefixSumByValue = new HashMap\u003C\u003E();\n    {\n        prefixSumByValue.put(0, 1);\n    }\n    int nowSum = 0;\n    for (int now : nums) {\n        nowSum += now;\n        if (!prefixSumByValue.containsKey(nowSum)) {\n            prefixSumByValue.put(nowSum, 0);\n        }\n        prefixSumByValue.put(nowSum, prefixSumByValue.get(nowSum) + 1);\n    }\n    return prefixSumByValue;\n}\n\npublic static int countZeroSumRanges(Map\u003CInteger, Integer\u003E prefixSumByValue) {\n    int cntRanges = 0;\n    for (Integer nowSum : prefixSumByValue.keySet()) {\n        int cntSum = prefixSumByValue.get(nowSum);\n        cntRanges += cntSum * (cntSum - 1) \u002F 2;\n    }\n\n    return cntRanges;\n}\n```\n\n## Два указателя\n\n### Задача 1\n\n\u003E Дана отсортированная последовательность чисел длиной N и число K. \nНеобходимо найти количество пар чисел A, B, таких что B - A \u003E K.\n\n#### Решение за $O(N^2)$\n\nПереберем все пары чисел и для каждой проверим условие.\n\nВо вложенном цикле можно идти не каждый раз сначала перебирая цифры, а дигаясь вправо от левой границы.\n\n```java\npublic static int cntPairsWithDiffGtk(int[] sortedNums, int k) {\n    int cntPairs = 0;\n    for (int i = 0; i \u003C sortedNums.length; i++) {\n        for (int j = i; j \u003C sortedNums.length; j++) {\n            if (sortedNums[j] - sortedNums[i] \u003E k) {\n                cntPairs += 1;\n            }\n        }\n    }\n    return cntPairs;\n}\n```\n#### Решение за $O(N)$\n\nВозьмем наименьшее число и найдем для него первое подходящее большее. Все еще большие числа точно подходят. Возьмем в качестве меньшего числа следующее, а указатель первого подходящего большего будем двигать начиная с той позиции, где он находится сейчас\n\n```java\npublic static int cntPairsWithDiffGtk(int[] sortedNums, int k) {\n    int cntPairs = 0;\n    int last = 0;\n    for (int first = 0; first \u003C sortedNums.length; first++) {\n\n        while (last \u003C sortedNums.length && sortedNums[last] - sortedNums[first] \u003C= k) {\n            last += 1;\n        }\n        cntPairs += sortedNums.length - last;\n    }\n    return cntPairs;\n}\n```\n\n### Задача 2\n\n\u003E Игрок в футбол обладает одной числовой характеристикой - профессионализмом. Команда называется сплоченной, если профессионализм любого игрока не превосходит сумарный профессионализм любых других двух игроков из команды. Команда может состоять из любого количества игроков. Дана отсортированная последовательность чисел длиной N - профессионализм игроков.\n\nНеобходимо найти максимальный суммарный профессионализм сплоченной команды.\n\n```java\npublic static int bestTeamSum(int[] players) {\n    int bestSum = 0;\n    int nowSum = 0;\n    int last = 0;\n    for (int first = 0; first \u003C players.length; first++) {\n\n        while (last \u003C players.length && (last == first || players[last] + players[first] \u003E= players[last]) {\n            nowSum += players[last];\n            last += 1;\n        }\n        bestSum = bestSum \u003E= nowSum ? bestSum : nowSum;\n        nowSum -= players[first];\n    }\n    return bestSum;\n}\n```\n\n### Задача 3\n\nДаны две отсортированные последовательности чисел (длиной N и M соответсвенно) \n\nНеобходимо слить их в одну отсортированную последовательность.\n\nРешение\n\n\nДве последовательности могуть быть не обязательно одинаковые по длине, могут быть одинаковые числа.\n\nИдея решения: делаем указатель на текущий элемент первой и во второй последовательности и просто выводим то что меньше по текущему указателю. Например, из чисел из 1 и 3 меньше 1 - 1 записали в ответ и указатель двинули в той последовательности из которой мы взяли очередное число и так далее. Если одна из последовательностей заканчивается мы просто выписываем весь оставшийся хвост текущей последовательности.\n\n#### Неидеальная реализация\n\nПоставим два указателя на начало каждой из последовательностей. Выберем тот, который указывает на меньшее число, запишем это число в результат и сдвинем указатель\n\n\n\n","description":"Префиксные суммы и два указателя","image":"null","category":null,"date":"01\u002F02\u002F2024","path":"\u002Fprefiksnye-summy-i-dva-ukazatelya\u002F","links":[{"title":"","items":[{"title":"Алгоритмы (курс Яндекс)","link":"\u002Falgoritmy-kurs-yandeks\u002F"},{"title":"Сложность, тестирование, особые случаи","link":"\u002Fslozhnost-testirovanie-osobye-sluchai\u002F"},{"title":"Линейный поиск","link":"\u002Flinejnyj-poisk\u002F"},{"title":"Множества","link":"\u002Fmnozhestva\u002F"},{"title":"Словари и сортировка подсчётом","link":"\u002Fslovari-i-sortirovka-podschyotom\u002F"},{"title":"Префиксные суммы и два указателя","link":"\u002Fprefiksnye-summy-i-dva-ukazatelya\u002F"},{"title":"Бинарный поиск","link":"\u002Fbinarnyj-poisk\u002F"},{"title":"Сортировка событий","link":"\u002Fsortirovka-sobytij\u002F"},{"title":"Деревья","link":"\u002Fderevya\u002F"}]}],"headings":[{"value":"Префиксные суммы","anchor":"#префиксные-суммы"},{"value":"Два указателя","anchor":"#два-указателя"}],"subtitles":[{"depth":2,"value":"Префиксные суммы","anchor":"#префиксные-суммы"},{"depth":3,"value":"Построение массива префиксных сумм","anchor":"#построение-массива-префиксных-сумм"},{"depth":3,"value":"Ответ на запрос суммы на полуинтервале","anchor":"#ответ-на-запрос-суммы-на-полуинтервале"},{"depth":3,"value":"Реализация RSQ(Range Summ Query) через префиксные суммы","anchor":"#реализация-rsqrange-summ-query-через-префиксные-суммы"},{"depth":3,"value":"Задача 1","anchor":"#задача-1"},{"depth":4,"value":"Решение за O(NM)","anchor":"#решение-за-onm"},{"depth":4,"value":"Решение за O(N+M)","anchor":"#решение-за-onm-1"},{"depth":3,"value":"Задача 2","anchor":"#задача-2"},{"depth":4,"value":"Решение за O(N3)O(N^3)O(N3)","anchor":"#решение-за-on3"},{"depth":4,"value":"Решение за O(N2)O(N^2)O(N2)","anchor":"#решение-за-on2"},{"depth":4,"value":"Решение за O(N)O(N)O(N)","anchor":"#решение-за-on"},{"depth":2,"value":"Два указателя","anchor":"#два-указателя"},{"depth":3,"value":"Задача 1","anchor":"#задача-1-1"},{"depth":4,"value":"Решение за O(N2)O(N^2)O(N2)","anchor":"#решение-за-on2-1"},{"depth":4,"value":"Решение за O(N)O(N)O(N)","anchor":"#решение-за-on-1"},{"depth":3,"value":"Задача 2","anchor":"#задача-2-1"},{"depth":3,"value":"Задача 3","anchor":"#задача-3"},{"depth":4,"value":"Неидеальная реализация","anchor":"#неидеальная-реализация"}],"tags":[{"id":"algorithms","title":"algorithms","path":"\u002Ftag\u002Falgorithms\u002F"},{"id":"java","title":"java","path":"\u002Ftag\u002Fjava\u002F"},{"id":"алгоритмы","title":"алгоритмы","path":"\u002Ftag\u002F%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC%D1%8B\u002F"}]},"comments":{"edges":[]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.efa271c5.js" defer></script><script src="/assets/js/page--src--templates--post-vue.e639b5b6.js" defer></script><script src="/assets/js/143.983cb1fa.js" defer></script><script src="/assets/js/141.369cc459.js" defer></script><script src="/assets/js/144.2eeac416.js" defer></script><script src="/assets/js/146.a7088a60.js" defer></script><script src="/assets/js/vue-remark--blog--posts--ru--java--algorithm-yandex--5-префиксные-суммы-и-два-указателя-md.49a8c537.js" defer></script><script src="/assets/js/151.1537b00e.js" defer></script>
  </body>
</html>
